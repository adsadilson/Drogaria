<ui:composition template="/WEB-INF/template/layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">

	<ui:define name="titulo">Contas a Receber</ui:define>

	<ui:define name="corpo">

		<style>
.rotuloLanc1 {
	width: 100px !important;
}

.rotuloLanc2 {
	width: 120px !important;
}

.rotuloFiltro1 {
	width: 115px !important;
}

.campoLanc1 {
	width: 360px !important;
}

.red {
	color: red !important;
}

.labelBlue {
	color: blue !important;
}

.corLabel {
	color: black !important;
}
-->
</style>


		<f:metadata>
			<o:viewAction action="#{contaAReceberBean.inicializar()}" />
		</f:metadata>

		<h1>Contas a Receber</h1>

		<h:form id="frm-menu" prependId="false">

			<!-- BOTÕES DE AÇÕES -->
			<p:toolbar style="margin-top: 15px" styleClass="semPreenchimento"
				id="toolbar-botoes">

				<p:toolbarGroup>
					<p:commandButton icon="fa fa-file-o" value="Novo" update="dgLancCR"
						oncomplete="PF('dialogLancCR').show()" process="@this"
						action="#{contaAReceberBean.novo}" id="bntNovoLanc"
						disabled="#{contaAReceberBean.filtro.cliente == null}">
						<p:resetInput target="dgLancCR" />
					</p:commandButton>

					<p:commandButton icon="fa fa-pencil" value="Editar"
						style="margin-left:3px; margin-right: 3px;"
						process="@this tblContaAReceber"
						oncomplete="#{contaAReceberBean.permitirEditar == 'true'} ? 
						PF('dialogLancCR').show() : PF('dialogInfoEdicao').show()"
						update="dgLancCR"
						disabled="#{contaAReceberBean.listaContasSelecionadas.size()!=1}">
					</p:commandButton>

					<p:commandButton icon="fa fa-trash" value="Excluir"
						style="margin-right: 3px;" process="@this"
						disabled="#{contaAReceberBean.listaContasSelecionadas.size()==0}">
					</p:commandButton>

					<p:commandButton icon="fa fa-filter" title="Filtrar Registro"
						actionListener="#{contaAReceberBean.novoFiltro()}"
						style="color:#8904B1;" update="frm-dialog"
						oncomplete="PF('dialogFiltro').show()" process="@this">
						<p:resetInput target="dgFiltro" />
					</p:commandButton>

					<p:separator />

					<p:commandButton icon="fa fa-check" value="Baixar Titulo(s)"
						id="btnRecebimento" update=":frm-baixa-titulo"
						style="color:#173B0B;" oncomplete="PF('baixaTitulo').show()"
						action="#{contaAReceberBean.iniciarBaixaTitulo()}"
						disabled="#{contaAReceberBean.listaContasSelecionadas.size()==0}">
						<p:resetInput target="" />
					</p:commandButton>

					<p:commandButton icon="fa fa-dollar" value="Cancelar Rec.(s)"
						style="margin-left: 3px; color:#8A0808;"
						oncomplete="PF('dialogPago').show()" update="frm-titulo-pagos"
						disabled="#{contaAReceberBean.filtro.cliente == null}"
						action="#{contaAReceberBean.iniciarCancelamentoTitulo()}">
						<p:resetInput target="frm-titulo-pagos" />
					</p:commandButton>

					<p:separator />

					<p:outputLabel value="CLIENTE"
						style="margin-left:10px; margin-right:10px; color:black" />

					<p:selectOneMenu autoWidth="false" style="width:345px; color:red"
						filter="true" filterMatchMode="contains"
						value="#{contaAReceberBean.filtro.cliente}"
						converter="omnifaces.SelectItemsConverter">
						<f:selectItem itemLabel="Selecione..." itemValue="#{null}"
							noSelectionOption="true" />
						<f:selectItems value="#{contaAReceberBean.listaDeClientes}"
							var="c" itemLabel="#{c.cpfCnpj} - #{c.nome}" itemValue="#{c}" />
						<p:ajax event="change" process="@this"
							listener="#{contaAReceberBean.pesquisar()}"
							update="toolbar-botoes tblContaAReceber toolbarTotais" />
					</p:selectOneMenu>

					<ui:remove>
						<p:commandButton id="txtPesquisa" icon="fa fa-search"
							value="PESQUISA" style="margin-left:10px;"
							update="tblContaAReceber toolbarTotais toolbar-botoes"
							actionListener="#{contaAReceberBean.pesquisar()}"
							disabled="#{contaAReceberBean.filtro.cliente.id == null}">
						</p:commandButton>
					</ui:remove>

				</p:toolbarGroup>

				<p:toolbarGroup align="right">
					<p:button value="Fechar" icon="fa fa-power-off" outcome="/home" />
				</p:toolbarGroup>

			</p:toolbar>

		</h:form>


		<!-- TABELA DE LANÇAMENTO EM CONTA -->
		<h:form prependId="false" id="frm-tabela">
			<p:dataTable id="tblContaAReceber" var="cp"
				value="#{contaAReceberBean.listaContaARecebers}"
				style="margin-top: 10px; margin-bottom:10px;" rows="12" lazy="false"
				paginatorTemplate="{FirstPageLink} {PreviousPageLink}  
				{NextPageLink} {LastPageLink} {CurrentPageReport} {JumpToPageDropdown}"
				emptyMessage="Nenhuma registro encontrado." scrollable="true"
				scrollHeight="345" rowStyleClass="#{cp.dias le 0 ? null : 'red'}"
				selection="#{contaAReceberBean.listaContasSelecionadas}"
				rowKey="#{cp.id}">

				<p:ajax event="rowSelect" update="toolbar-botoes toolbarTotais"
					listener="#{contaAReceberBean.rowSelect}" />
				<p:ajax event="rowUnselect" update="toolbar-botoes toolbarTotais"
					listener="#{contaAReceberBean.rowUnSelect}" />
				<p:ajax event="toggleSelect" update="toolbar-botoes toolbarTotais"
					listener="#{contaAReceberBean.onRowSelectAll}" />
				<p:ajax event="rowSelectCheckbox"
					update="toolbar-botoes toolbarTotais"
					listener="#{contaAReceberBean.rowSelectCheckBox}" />
				<p:ajax event="rowUnselectCheckbox"
					update="toolbar-botoes toolbarTotais"
					listener="#{contaAReceberBean.rowUnSelect}" />



				<p:column selectionMode="multiple"
					style="width:1px;text-align:center" />

				<p:column sortBy="#{cp.numDoc}"
					style="text-align: right; width:35px;" headerText="Documento">
					<h:outputText value="#{cp.numDoc}">
					</h:outputText>
				</p:column>

				<p:column style="text-align: center;  width:17px "
					headerText="Parcela(s)">
					<h:outputText value="#{cp.parcela}" />
				</p:column>

				<p:column sortBy="#{cp.cliente}" headerText="Cliente" width="195">
					<h:outputText
						value="#{cp.cliente.id} - #{fn:substring(cp.cliente.nome,0,44)}" />
				</p:column>

				<p:column style="text-align: center; width:50px;"
					headerText="Emissão">
					<h:outputText value="#{cp.dataDoc}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>

				<p:column style="text-align: center;width:50px;"
					headerText="Vencimento" sortBy="#{cp.dataVencto}">
					<h:outputText value="#{cp.dataVencto}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>


				<p:column style="text-align: center; width: 17px;"
					headerText="Dia(s)">
					<h:outputText value="#{cp.dias > 0 ? cp.dias : null}">
					</h:outputText>
				</p:column>

				<p:column style="text-align: right;width:60px;" headerText="Valor">
					<h:outputText value="#{cp.valor}">
						<f:convertNumber type="currency" currencySymbol="R$" />
					</h:outputText>
				</p:column>

				<p:column style="text-align: right;width:60px;"
					headerText="À Receber">
					<h:outputText value="#{cp.valorApagar}">
						<f:convertNumber type="currency" currencySymbol="R$" />
					</h:outputText>
				</p:column>

			</p:dataTable>

			<p:confirmDialog header="Confirmação de Exclusão"
				widgetVar="confirmacaoExclusao" id="confirmacaoExclusaoDialog">
				<f:facet name="message">
					<h:outputText
						value="Tem certeza que deseja excluir o(s) registro(s):" />
					<br />
					<br />
					<p:repeat value="#{contaAReceberBean.contaAReceberSelecionado}"
						var="car">
						<h:panelGrid columns="3" cellpadding="1">
							<h:outputText value="#{car.numDoc}"
								style="font-weight: bold; margin-right:10px;" />
							<h:outputText value="#{car.cliente.nome}"
								style="font-weight: bold; margin-right:10px;" />
							<h:outputText value="#{car.valor}" style="font-weight: bold;">
								<f:convertNumber type="currency" />
							</h:outputText>
						</h:panelGrid>
					</p:repeat>
				</f:facet>
				<p:button value="Não"
					onclick="PF('confirmacaoExclusao').hide(); return false;" />
				<p:commandButton value="Sim"
					actionListener="#{contaAReceberBean.excluirSelecionados}"
					update="tblContaAReceber toolbar-botoes" process="@this"
					oncomplete="if(!args.validationFailed) PF('confirmacaoExclusao').hide()" />
			</p:confirmDialog>

			<p:toolbar styleClass="semPreenchimento">
				<p:toolbarGroup align="right">

					<h:panelGrid id="toolbarTotais" columns="4">
						<p:outputLabel value="Total Avencer:"
							style="font-size:13px; margin-right:30px; color:black" />
						<p:outputLabel
							style="color:green; font-size:14px; margin-right:50px;"
							value="#{contaAReceberBean.totalAVencer}">
							<f:convertNumber type="currency" />
						</p:outputLabel>
						<p:outputLabel value="Total Hoje:"
							style="font-size:13px; margin-right:30px; color:black" />
						<p:outputLabel
							style="color:#5D478B; font-size:14px; margin-right:50px;"
							value="#{contaAReceberBean.totalGeral}">
							<f:convertNumber type="currency" />
						</p:outputLabel>
						<p:outputLabel value="Total Vencido:"
							style="font-size:13px; margin-right:30px; color:black" />
						<p:outputLabel
							style="color:red; font-size:14px; margin-right:50px;"
							value="#{contaAReceberBean.totalAVencido}">
							<f:convertNumber type="currency" />
						</p:outputLabel>
						<p:outputLabel value="Total Selecionado"
							style="font-size:13px; margin-right:30px; color:black" />
						<p:outputLabel
							style="color:blue; font-size:14px; margin-right:10px;"
							value="#{contaAReceberBean.totalSelecionado}">
							<f:convertNumber type="currency" />
						</p:outputLabel>
					</h:panelGrid>
				</p:toolbarGroup>
			</p:toolbar>

		</h:form>


		<!-- DIALOG DE LANÇAMENTO CONTAS A RECEBER -->

		<p:dialog header="Lançamento Contas a Receber"
			widgetVar="dialogLancCR" modal="true" width="750" height="430"
			resizable="true" draggable="true" id="dgLancCR" visible="false"
			closeOnEscape="true" appendTo="@(body)">

			<h:form id="frm-lancamento" prependId="false">

				<p:growl autoUpdate="true" />

				<h:panelGrid columns="4" id="panelGridCabNota"
					columnClasses="rotuloLanc1, campoLanc1, rotuloLanc2">

					<p:outputLabel for="txtLancCliente" value="Cliente" />
					<p:outputLabel id="txtLancCliente" size="36" style="color: blue"
						value="#{fn:substring(contaAReceberBean.cabContaAReceber.cliente.nome,0,41)}" />

					<p:outputLabel for="txtLancEmissao" value="Dt Lançameto" />
					<p:calendar size="11" pattern="dd/MM/yyyy" locale="pt_BR"
						id="txtLancEmissao" onfocus="mascaraDtCalendar('txtLancEmissao')"
						styleClass="cssCalender"
						value="#{contaAReceberBean.cabContaAReceber.dataDoc}"
						required="true" requiredMessage="Informe uma data de emissão">
						<p:ajax event="dateSelect" process="@this"
							update="txtLancVencimento" />
					</p:calendar>

					<p:outputLabel value="CPF/CNPJ" />
					<p:outputLabel style="color:blue"
						value="#{contaAReceberBean.cabContaAReceber.cliente.cpfCnpj}" />

					<p:outputLabel for="txtLancVencimento" value="Vencimento" />
					<p:calendar size="11" pattern="dd/MM/yyyy" locale="pt_BR"
						id="txtLancVencimento" styleClass="cssCalender"
						mindate="#{contaAReceberBean.cabContaAReceber.dataDoc}"
						onfocus="mascaraDtCalendar('txtVencimento')"
						value="#{contaAReceberBean.cabContaAReceber.dataVencto}"
						required="true"
						requiredMessage="Informe uma data para a vencimento">
						<p:ajax process="@this" event="dateSelect" />
					</p:calendar>
				</h:panelGrid>

				<p:tabView prependId="false"
					style="width: 99%; height: 300px; margin-top:10px; ">


					<!-- ABA RATEIO DA NOTA -->
					<p:tab title="Rateio da Nota">

						<p:panel styleClass="semPreenchimento rateio" id="panelLancRateio">

							<h:panelGrid id="panelGridLancRateio" columns="5">

								<p:selectOneMenu value="#{contaAReceberBean.movto.tipoConta}"
									autoWidth="false" style="width:35px;"
									converter="omnifaces.SelectItemsConverter">
									<f:selectItem itemLabel="Tipo" itemValue="#{null}" />
									<f:selectItems value="#{contaAReceberBean.listaTipoLanc}"
										var="tp" itemLabel="#{tp.sigla} - #{tp.descricao}"
										itemValue="#{tp}" />
									<p:ajax listener="#{contaAReceberBean.listaContaLancamento()}"
										event="change" process="@this" update="combLancConta" />
								</p:selectOneMenu>

								<p:selectOneMenu id="combLancConta" autoWidth="false"
									style="width:150px;" required="true" filter="true"
									requiredMessage="Selecione uma conta."
									value="#{contaAReceberBean.movto.planoConta}"
									converter="omnifaces.SelectItemsConverter">
									<f:selectItem itemLabel="Selecione a conta" itemValue="#{null}"
										noSelectionOption="true" />
									<f:selectItems value="#{contaAReceberBean.listaDePlanoContas}"
										var="conta" itemLabel="#{conta.nome}" itemValue="#{conta}" />
								</p:selectOneMenu>

								<p:inputText required="true"
									requiredMessage="Informe a descrição" placeholder="descrição"
									value="#{contaAReceberBean.movto.descricao}" size="30" />

								<p:inputText id="txtLancValor" required="true"
									requiredMessage="Informe um valor"
									onfocus="formatoMoeda('txtLancValor')"
									value="#{contaAReceberBean.movto.vlrEntrada}"
									placeholder="VALOR" size="10">
									<f:validateDoubleRange minimum="0.01" />
									<f:convertNumber type="currency" />
								</p:inputText>

								<p:commandButton icon="fa fa-download" title="Adicionar conta"
									process="@this panelGridCabNota panelGridLancRateio "
									action="#{contaAReceberBean.addConta()}"
									update="panelGridCabNota panelGridLancRateio tblRateioRec @(.total)"
									id="salvarCommandButtonRateio">
								</p:commandButton>

							</h:panelGrid>

							<p:dataTable id="tblRateioRec" style="width:99%;"
								emptyMessage="Nenhuma registro lançado" scrollable="true"
								scrollHeight="160" value="#{contaAReceberBean.listaDeMovtos}"
								var="m">

								<p:column style="width:35px; text-align:center;"
									headerText="Ação">
									<p:commandButton title="Excluir" process="@this"
										icon="ui-icon-trash" styleClass="semPreenchimento"
										update="tblRateioRec panelGridCabNota @(.total)"
										action="#{contaAReceberBean.removerConta()}">
										<f:setPropertyActionListener value="#{m}"
											target="#{contaAReceberBean.movto}" />
									</p:commandButton>

								</p:column>
								<p:column style="width:140px" headerText="Plano Conta">
									<h:outputText
										value="#{m.planoConta.id}#{m.planoConta.tipo} 
										- #{fn:substring(m.planoConta.nome,0,12)}" />
								</p:column>
								<p:column style="width:233px" headerText="Descrição">
									<h:outputText value="#{fn:substring(m.descricao,0,31)}" />
								</p:column>
								<p:column style="width:115px; text-align:right;"
									headerText="Valor R$">
									<h:outputText value="#{m.vlrEntrada}">
										<f:convertNumber type="currency" />
									</h:outputText>
								</p:column>
							</p:dataTable>

							<p:toolbar styleClass="semPreenchimento" style="margin-top:10px;">
								<p:toolbarGroup align="right">
									<p:outputLabel value="Total:"
										style="font-size:13px; margin-right:70px; color:black" />
									<p:outputLabel id="txtTotalRateio" styleClass="total"
										style="color:red; font-size:14px; margin-right:10px;"
										value="#{contaAReceberBean.movto.totalRateio}">
										<f:convertNumber type="currency" />
									</p:outputLabel>
								</p:toolbarGroup>
							</p:toolbar>

						</p:panel>
					</p:tab>


					<!-- ABA FORMA DE PAGAMENTO -->
					<p:tab title="Forma de Recebimento">

						<p:panel styleClass="semPreenchimento pagto" id="panelPagto">

							<h:panelGrid id="panelGridPagto" columns="8">

								<p:selectOneMenu id="comboTipoCobranca" autoWidth="false"
									style="width:170px;"
									value="#{contaAReceberBean.parcela.tipoRecebimento}"
									converter="omnifaces.SelectItemsConverter" required="true"
									requiredMessage="Selecione tipo de cobrança">
									<f:selectItem itemLabel="Tipo de Cobrança" itemValue="#{null}" />
									<f:selectItems
										value="#{contaAReceberBean.listaTipoRecebimentos}" var="cob"
										itemLabel="#{cob.sigla} - #{cob.descricao}" itemValue="#{cob}" />
								</p:selectOneMenu>

								<p:outputLabel value="Parcela(s)"
									style="margin-left:8px; margin-right:2px;" />
								<p:spinner size="1" min="1" max="100"
									value="#{contaAReceberBean.parcela.numVezes}" />

								<p:outputLabel value="Intervalo"
									style="margin-left:9px; margin-right:2px;" />
								<p:spinner size="1" min="1" max="30"
									value="#{contaAReceberBean.parcela.periodo}" />

								<p:outputLabel value="Dia(s)"
									style="margin-left:1px; margin-right:9px;" />

								<p:inputText id="txtVlrPag" required="true"
									requiredMessage="Informe um valor" styleClass="total"
									readonly="true" onfocus="formatoMoeda('txtVlrPag')"
									value="#{contaAReceberBean.parcela.valor}" size="10">
									<f:validateDoubleRange minimum="0.01" />
									<f:convertNumber type="currency" />
								</p:inputText>

								<p:commandButton icon="fa fa-cog" title="Gerar Parcela(s)"
									disabled="#{contaAReceberBean.listaDeMovtos.size() == 0}"
									process="@this panelGridPagto" styleClass="total"
									action="#{contaAReceberBean.gerarParcelas}"
									update="tblPagto panelGridPagto txtTotalPagto @(.total)"
									id="salvarCommandButtonPagto" />
							</h:panelGrid>


							<p:dataTable id="tblPagto" style="width:99%;" styleClass="total"
								emptyMessage="Nenhuma registro lançado" scrollable="true"
								scrollHeight="160" value="#{contaAReceberBean.listaDeParcelas}"
								var="p">

								<p:column style="width:35px; text-align:center;"
									headerText="Ação">
									<p:commandButton icon="ui-icon-pencil" title="Editar"
										styleClass="semPreenchimento" update="edit"
										oncomplete="PF('dialogEdicaoParcela').show()" process="@this"
										action="#{contaAReceberBean.abrirEdicao()}">
										<f:setPropertyActionListener
											target="#{contaAReceberBean.parcela}" value="#{p}" />
									</p:commandButton>

								</p:column>
								<p:column style="width:35px; text-align:center;"
									headerText="Tipo">
									<h:outputText value="#{p.tipoRecebimento.sigla}" />
								</p:column>
								<p:column style="width:60px; text-align:center;"
									headerText="Parcela(s)">
									<h:outputText value="#{p.parcela}" />
								</p:column>
								<p:column style="text-align:center; width:100px;"
									headerText="Documento">
									<h:outputText value="#{p.numDoc}" />
								</p:column>
								<p:column style="text-align:center; width:110px;"
									headerText="Vencimento">
									<h:outputText value="#{p.dataVencto}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText>
								</p:column>
								<p:column style="width:115px; text-align:right;"
									headerText="Valor R$">
									<h:outputText value="#{p.valor}">
										<f:convertNumber type="currency" />
									</h:outputText>
								</p:column>
							</p:dataTable>

							<p:toolbar styleClass="semPreenchimento" style="margin-top:10px;">
								<p:toolbarGroup align="right">
									<p:outputLabel value="Total:"
										style="font-size:13px; margin-right:70px; color:black" />
									<p:outputLabel id="txtTotalPagto" styleClass="total"
										value="#{contaAReceberBean.parcela.totalPagamento}"
										style="color:red; font-size:14px; margin-right:10px;">
										<f:convertNumber type="currency" />
									</p:outputLabel>
								</p:toolbarGroup>
							</p:toolbar>

						</p:panel>
					</p:tab>

				</p:tabView>

				<p:toolbar style="margin-top: 10px; margin-button:5px"
					styleClass="semPreenchimento">
					<p:toolbarGroup align="right" style="margin-right: 0px;">
						<p:commandButton value="Salvar" icon="fa fa-save"
							process="panelGridCabNota @this"
							action="#{contaAReceberBean.salvar()}"
							update="panelGridCabNota tblContaAReceber"
							oncomplete="if(args.sucesso == true) PF('dialogLancCR').hide()">
						</p:commandButton>
					</p:toolbarGroup>
				</p:toolbar>

			</h:form>

		</p:dialog>


		<!-- DIALOG EDIÇÃO DE PARCELA(S) -->
		<p:dialog header="Edição de parcela(s)"
			widgetVar="dialogEdicaoParcela" modal="true" resizable="false"
			draggable="true" id="dgEdicaoParcela" closeOnEscape="true"
			width="300" height="190" appendTo="@(body)">

			<p:ajax event="close" update="panelGridCabNota" />

			<h:form id="edit" prependId="false">

				<p:growl autoUpdate="true" />

				<h:panelGrid id="panelEdicaoParcela" columns="2"
					style="margin-top:10px;" columnClasses="rotulo">


					<p:outputLabel value="Parcela" />
					<p:inputText value="#{contaAReceberBean.parcelaEdicao.parcela}"
						disabled="true" size="11" />

					<p:outputLabel for="txtEdicaoVencimento" value="Vencimento" />
					<p:inputText size="11" id="txtEdicaoVencimento"
						onfocus="mascaraDtInput('txtEdicaoVencimento')"
						value="#{contaAReceberBean.parcelaEdicao.dataVencto}"
						required="true"
						requiredMessage="Informe uma data para a vencimento">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</p:inputText>

					<p:outputLabel value="Valor" for="txtEdicaoVlrPag" />
					<p:inputText id="txtEdicaoVlrPag" required="true"
						requiredMessage="Informe um valor"
						onfocus="formatoMoeda('txtEdicaoVlrPag')"
						value="#{contaAReceberBean.parcelaEdicao.valor}"
						placeholder="VALOR" size="11">
						<f:validateDoubleRange minimum="0.01" />
						<f:convertNumber type="currency" />
					</p:inputText>

				</h:panelGrid>

				<p:toolbar style="margin-top: 15px" styleClass="semPreenchimento">
					<p:toolbarGroup align="right" style="margin-right: 0px;">
						<p:commandButton value="Salvar" icon="fa fa-save"
							action="#{contaAReceberBean.salvarEdicaoParcela()}"
							process="@this edit"
							oncomplete="if(!args.validationFailed) PF('dialogEdicaoParcela').hide()"
							update="edit tblPagto txtTotalPagto"
							id="salvarCommandButtonParcela">
						</p:commandButton>
					</p:toolbarGroup>
				</p:toolbar>

				<p:defaultCommand target="salvarCommandButtonParcela" />

			</h:form>

		</p:dialog>

		<p:dialog header="Filtro" widgetVar="dialogFiltro" modal="true"
			resizable="false" draggable="true" id="dgFiltro" visible="false"
			closeOnEscape="true" width="398" height="225" appendTo="@(body)">

			<h:form id="frm-dialog" prependId="false" style="margin-top:10px;">

				<h:panelGrid columnClasses="rotuloFiltro1,campoFiltro1" columns="2">

					<p:outputLabel value="Cliente" />
					<p:selectOneMenu id="combClienteFiltro" autoWidth="false"
						filter="true" value="#{contaAReceberBean.filtro.cliente}"
						filterMatchMode="contains" style="width:215px;"
						converter="omnifaces.SelectItemsConverter">
						<f:selectItem itemLabel="Selecione..." itemValue="#{null}" />
						<f:selectItems value="#{contaAReceberBean.listaDeClientes}"
							var="pessoa" itemLabel="#{pessoa.nome}" itemValue="#{pessoa}" />
					</p:selectOneMenu>

					<p:outputLabel value="Emissão" />
					<h:panelGroup>
						<p:calendar id="txtFiltroDtIni"
							value="#{contaAReceberBean.filtro.dataEmissaoIni}" size="10"
							pattern="dd/MM/yyyy" locale="pt_BR"
							onfocus="mascaraDtCalendar('txtFiltroDtIni')">
							<p:ajax event="dateSelect" process="@this" />
						</p:calendar>
						<p:outputLabel value="a"
							style="margin-left:8px; margin-right:8px;" />
						<p:calendar value="#{contaAReceberBean.filtro.dataEmissaoFim}"
							size="10" id="txtEmissaoDtFim" pattern="dd/MM/yyyy"
							locale="pt_BR" onfocus="mascaraDtCalendar('txtEmissaoDtFim')">
							<p:ajax event="dateSelect" process="@this" />
							<f:attribute name="startDate"
								value="#{contaAReceberBean.filtro.dataEmissaoIni}" />
							<f:validator validatorId="primeDateRangeValidator" />
						</p:calendar>
					</h:panelGroup>

					<p:outputLabel value="Vencimento" />
					<h:panelGroup>
						<p:calendar id="txtFiltroDtVenctoIni"
							value="#{contaAReceberBean.filtro.dataVenctoIni}" size="10"
							pattern="dd/MM/yyyy" locale="pt_BR"
							onfocus="mascaraDtCalendar('txtFiltroDtVenctoIni')">
							<p:ajax event="dateSelect" process="@this" />
						</p:calendar>
						<p:outputLabel value="a"
							style="margin-left:8px; margin-right:8px;" />
						<p:calendar value="#{contaAReceberBean.filtro.dataVenctoFim}"
							size="10" id="txtFiltroDtVenctoFim" pattern="dd/MM/yyyy"
							locale="pt_BR"
							onfocus="mascaraDtCalendar('txtFiltroDtVenctoFim')">
							<p:ajax event="dateSelect" process="@this" />
							<f:attribute name="startDate"
								value="#{contaAReceberBean.filtro.dataVenctoIni}" />
							<f:validator validatorId="primeDateRangeValidator" />
						</p:calendar>
					</h:panelGroup>

					<p:outputLabel value="Documento" />
					<p:inputText value="#{contaAReceberBean.filtro.doc}"
						style="width:230px;" />

					<p:outputLabel value="Valor à pagar" />
					<h:panelGroup>
						<p:inputNumber value="#{contaAReceberBean.filtro.valor1}"
							size="10" decimalSeparator="," thousandSeparator="." />
						<p:outputLabel value="a"
							style="margin-left:8px; margin-right:8px;" />
						<p:inputNumber value="#{contaAReceberBean.filtro.valor2}"
							size="10" decimalSeparator="," thousandSeparator="." />
					</h:panelGroup>


				</h:panelGrid>

				<p:toolbar style="margin-top: 20px" styleClass="semPreenchimento">
					<p:toolbarGroup align="right" style="margin-right: 0px;">
						<p:commandButton value="Pesquisar" icon="fa fa-search"
							actionListener="#{contaAReceberBean.pesquisar}"
							id="btnFiltroPesquisar" process="frm-dialog"
							oncomplete="PF('dialogFiltro').hide()"
							update="tblContaAReceber frm-menu frm-dialog" />
					</p:toolbarGroup>
				</p:toolbar>

			</h:form>
		</p:dialog>



		<!-- Recebimento de titulos -->
		<p:dialog header="Recebimento(s) de titulo(s)" widgetVar="baixaTitulo"
			modal="true" resizable="false" id="dialogBaixaTitulo"
			draggable="true" closeOnEscape="true" width="750" height="400"
			appendTo="@(body)">

			<p:ajax event="close"
				update="frm-baixa-titulo :tblContaAReceber :toolbar-botoes"
				listener="#{contaAReceberBean.closeBaixaTitulo()}" />

			<h:form prependId="false" id="frm-baixa-titulo"
				onkeypress="return event.keyCode != 13">

				<p:tabView prependId="false"
					style="width: 99%; height: 365px; margin-top:5px;">

					<p:tab title="Recebimento do titulo"
						rendered="#{contaAReceberBean.listaContasAReceber.size()==1}">

						<h:panelGrid columns="3" id="panelGridBaixaSimples"
							style="margin-left:10px;">

							<p:outputLabel value="Conta Corrente" for="txtBaixaSimpleCC" />
							<p:outputLabel value="Num | Parc" />
							<p:outputLabel value="Data Pagamento"
								for="txtBaixaSimpleDtPagamento" />

							<p:selectOneMenu autoWidth="false" style="width:370px"
								id="txtBaixaSimpleCC" required="true" filter="true"
								requiredMessage="Selecione uma conta."
								value="#{contaAReceberBean.recebimento.conta}"
								converter="omnifaces.SelectItemsConverter">
								<f:selectItem itemLabel="Selecione a conta" itemValue="#{null}"
									noSelectionOption="true" />
								<f:selectItems
									value="#{contaAReceberBean.carregarContasACreditar}"
									var="conta" itemLabel="#{conta.nome}" itemValue="#{conta}" />
							</p:selectOneMenu>

							<p:inputText size="15" disabled="true"
								value="#{contaAReceberBean.contaAReceber.numDoc} | #{contaAReceberBean.contaAReceber.parcela}" />

							<p:calendar size="13" pattern="dd/MM/yyyy" locale="pt_BR"
								value="#{contaAReceberBean.recebimento.dataPago}"
								id="txtBaixaSimpleDtPagamento"
								onfocus="mascaraDtCalendar('dtBaixa')" styleClass="cssCalender"
								required="true" requiredMessage="Informe uma data da baixa">
							</p:calendar>

						</h:panelGrid>


						<p:panel style="width:96%; margin-left:10px; margin-top:5px;">

							<h:panelGrid columns="2" id="panelGridBaixaSimples1"
								columnClasses="campoBaixaSimple1">

								<p:outputLabel value="Saldo Devedor" />
								<p:inputText
									value="#{contaAReceberBean.contaAReceber.saldoDevedor}"
									size="12" readonly="true" style="text-align:right">
									<f:convertNumber type="currency" />
								</p:inputText>

								<p:outputLabel value="Multa/Juros" />
								<p:inputText style="text-align:right" size="12"
									id="txtBaixaSimpleVlrMultaJuros"
									value="#{contaAReceberBean.contaAReceber.multaTB}"
									onfocus="formatoMoeda('txtBaixaSimpleVlrMultaJuros')">
									<f:convertNumber type="currency" />
									<p:ajax process="@this" event="keyup"
										listener="#{contaAReceberBean.calcularValores}"
										update="txtBaixaSimpleVlrApagar txtBaixaSimpleVlrPago" />
								</p:inputText>

								<p:outputLabel value="Desconto" />
								<p:inputText style="text-align:right" size="12"
									id="txtBaixaSimpleDesc"
									value="#{contaAReceberBean.contaAReceber.descTB}"
									onfocus="formatoMoeda('txtBaixaSimpleDesc')">
									<f:convertNumber type="currency" />
									<p:ajax process="@this" event="keyup"
										listener="#{contaAReceberBean.calcularValores}"
										update="txtBaixaSimpleVlrApagar txtBaixaSimpleVlrPago" />
								</p:inputText>

								<p:outputLabel value="Valor Apagar" />
								<p:inputText
									value="#{contaAReceberBean.contaAReceber.valorApagar}"
									size="12" id="txtBaixaSimpleVlrApagar" style="text-align:right"
									disabled="true">
									<f:convertNumber type="currency" />
								</p:inputText>

								<p:spacer />
								<hr />

								<p:outputLabel value="Recebimento" />
								<p:inputText style="text-align:right" size="12" required="true"
									requiredMessage="Informe o valor Recebimento"
									id="txtBaixaSimpleVlrPago"
									validatorMessage="O valor de recebimento é menor do que o 
									mínimo permitido de '0,01'"
									value="#{contaAReceberBean.contaAReceber.pagoTB}"
									onfocus="formatoMoeda('txtBaixaSimpleVlrPago')">
									<f:validateDoubleRange minimum="0.01" />
									<f:convertNumber type="currency" />
									<p:ajax process="@this" event="change" update="labelInf" />
								</p:inputText>

								<p:outputLabel value="Descrição" />
								<p:inputText value="#{contaAReceberBean.recebimento.descricao}"
									size="60">
								</p:inputText>

							</h:panelGrid>
						</p:panel>

						<p:toolbar style="margin-top:10px; margin-right:10px;"
							styleClass="semPreenchimento">
							<p:toolbarGroup>
								<h:panelGroup id="labelInf">
									<p:outputLabel styleClass="red"
										rendered="#{contaAReceberBean.labelInfo eq 'sim'}"
										style="margin-left:10px"
										value="A diferença do recebimento será gerado outra fatura!" />
									<p:outputLabel styleClass="corLabel"
										rendered="#{contaAReceberBean.labelInfo eq 'nao'}" value=""
										style="margin-left:10px" />
								</h:panelGroup>
							</p:toolbarGroup>
							<p:toolbarGroup align="right">
								<p:commandButton value="Confirmar"
									action="#{contaAReceberBean.salvarBaixaSimples}"
									oncomplete="if(!args.validationFailed) PF('baixaTitulo').hide()"
									process="@this panelGridBaixaSimples panelGridBaixaSimples1"
									update="panelGridBaixaSimples panelGridBaixaSimples1"
									icon="ui-icon-check">
								</p:commandButton>
							</p:toolbarGroup>
						</p:toolbar>


					</p:tab>

					<p:tab title="Informações dos titulos"
						rendered="#{contaAReceberBean.listaContasAReceber.size()>1}">

						<p:dataTable id="tabela-parcela" style="width:auto;"
							value="#{contaAReceberBean.listaContasAReceber}"
							var="contaAReceber" rowIndexVar="idx" scrollable="true"
							scrollHeight="165" editable="true" editMode="cell">

							<p:ajax event="cellEdit"
								listener="#{contaAReceberBean.onCellEdit}" />

							<p:column style="text-align:center; width:10px;"
								headerText="Parc.">
								<h:outputText value="#{contaAReceber.parcela}" />
							</p:column>
							<p:column style="width:25px;" headerText="Doc.">
								<h:outputLabel value="#{contaAReceber.numDoc}" />
							</p:column>

							<p:column style="text-align:right; width:60px;"
								headerText="Saldo devedor">
								<h:outputLabel for="txtBaixaMultaJuro"
									value="#{contaAReceber.saldoDevedor}">
									<f:convertNumber type="currency" />
								</h:outputLabel>
							</p:column>
							<p:column style="text-align:right; width:55px;"
								headerText="Multa/Juros">
								<p:cellEditor>
									<f:facet name="output">
										<h:outputLabel for="txtBaixaMultaJuro"
											value="#{contaAReceber.multaTB}">
											<f:convertNumber type="currency" currencySymbol="" />
										</h:outputLabel>
									</f:facet>
									<f:facet name="input">
										<p:inputText style="width:85%" id="txtBaixaMultaJuro"
											value="#{contaAReceber.multaTB}" styleClass="moeda"
											onfocus="mascaraMoeda();" converter="moedaConverter">
											<p:ajax event="blur"
												listener="#{contaAReceberBean.calcularTotais}"
												update="tabela-parcela txtJuro txtVlrPago txtVlrAPagar 
												txtBaixaPago labelVlrApagarBaixaMultipla" />
										</p:inputText>
									</f:facet>
								</p:cellEditor>
							</p:column>
							<p:column style="text-align:right; width:55px;"
								headerText="Desconto">
								<p:cellEditor>
									<f:facet name="output">
										<h:outputLabel value="#{contaAReceber.descTB}">
											<f:convertNumber type="currency" currencySymbol="" />
										</h:outputLabel>
									</f:facet>
									<f:facet name="input">
										<p:inputText style="width:85%" styleClass="moeda"
											value="#{contaAReceber.descTB}" onfocus="mascaraMoeda();"
											converter="moedaConverter">
											<p:ajax event="blur"
												listener="#{contaAReceberBean.calcularTotais}"
												update="tabela-parcela txtDesc txtVlrPago txtVlrAPagar 
												txtBaixaPago labelVlrApagarBaixaMultipla" />
										</p:inputText>
									</f:facet>
								</p:cellEditor>
							</p:column>
							<p:column style="text-align:right; width:60px;"
								headerText="Valor à pagar">
								<h:outputLabel value="#{contaAReceber.valorApagar}">
									<f:convertNumber type="currency" />
								</h:outputLabel>
							</p:column>

							<p:column style="text-align:right; width:60px;"
								headerText="Valor pago" id="pago">
								<p:cellEditor>
									<f:facet name="output">
										<h:outputLabel value="#{contaAReceber.pagoTB}">
											<f:convertNumber type="currency" />
										</h:outputLabel>
									</f:facet>
									<f:facet name="input">
										<p:inputText value="#{contaAReceber.pagoTB}" style="width:90%"
											styleClass="moeda" converter="moedaConverter"
											onfocus="mascaraMoeda();">
											<p:ajax event="change"
												update="@this txtBaixaPago txtVlrPago labelVlrApagarBaixaMultipla" />
											<p:ajax event="blur"
												update="txtBaixaPago txtVlrPago labelVlrApagarBaixaMultipla" />
										</p:inputText>
									</f:facet>
								</p:cellEditor>
							</p:column>

						</p:dataTable>


						<p:toolbar style="margin-top:25px;" styleClass="semPreenchimento">

							<p:toolbarGroup align="right">

								<hr />
								<h:panelGrid columns="6"
									columnClasses="rotuloInfTitulo1, campoInfTitulo1,
									rotuloInfTitulo1, campoInfTitulo1, rotuloInfTitulo1, campoInfTitulo2">

									<p:spacer />
									<p:spacer />

									<p:outputLabel value="Multa/Juros" styleClass="corLabel" />
									<p:inputText id="txtJuro" onfocus="formatoMoeda('txtJuro')"
										disabled="true" size="10"
										value="#{contaAReceberBean.totalMultaJuros}">
										<f:convertNumber type="currency" />
									</p:inputText>

									<p:outputLabel value="Total à pagar" styleClass="corLabel" />
									<p:inputText id="txtVlrAPagar" disabled="true"
										value="#{contaAReceberBean.totalApagar}" size="10">
										<f:convertNumber type="currency" />
									</p:inputText>

									<p:outputLabel value="SubTotal" styleClass="corLabel" />
									<p:inputText disabled="true"
										value="#{contaAReceberBean.totalSelecionado}" size="10">
										<f:convertNumber type="currency" />
									</p:inputText>


									<p:outputLabel value="Desconto" styleClass="corLabel" />
									<p:inputText id="txtDesc"
										value="#{contaAReceberBean.totalDesc}" size="10"
										disabled="true">
										<f:convertNumber type="currency" />
									</p:inputText>

									<p:outputLabel value="Total pago" styleClass="corLabel" />
									<p:inputText disabled="true" id="txtVlrPago"
										value="#{contaAReceberBean.totalPago}" size="10">
										<f:convertNumber type="currency" />
									</p:inputText>

								</h:panelGrid>

							</p:toolbarGroup>

						</p:toolbar>

					</p:tab>

					<p:tab title="Informação do recebimento"
						rendered="#{contaAReceberBean.listaContasAReceber.size()>1}">

						<h:panelGrid columns="3" style="margin-top:3px;"
							id="panelGridPagamento"
							columnClasses="rotuloInfConta1,campoInfConta1,rotuloInfConta2,campoInfConta2">

							<p:outputLabel value="Forma da baixa" />

							<p:outputLabel value="Conta à creditar" for="txtContaBaixar" />

							<p:outputLabel value="Data Baixa" for="dtBaixa" />

							<p:selectOneMenu autoWidth="false" style="width:110px;"
								value="#{contaAReceberBean.recebimento.formaBaixa}"
								converter="omnifaces.SelectItemsConverter" required="true"
								requiredMessage="Selecione tipo">
								<f:selectItems value="#{contaAReceberBean.listaFormaBaixa}"
									var="fp" itemLabel="#{fp.descricao}" itemValue="#{fp}" />
								<p:ajax event="change" process="@this"
									update="txtBaixaMultiplaDesc dataTableRecebimento txtBaixaPago"
									listener="#{contaAReceberBean.formaBaixa()}" />
							</p:selectOneMenu>

							<p:selectOneMenu autoWidth="false" style="width:378px"
								id="txtContaBaixar" required="true" filter="true"
								requiredMessage="Selecione uma conta." immediate="true"
								value="#{contaAReceberBean.movto.planoConta}"
								converter="omnifaces.SelectItemsConverter">
								<f:selectItem itemLabel="Selecione a conta" itemValue="#{null}"
									noSelectionOption="true" />
								<f:selectItems
									value="#{contaAReceberBean.carregarContasACreditar}"
									var="conta" itemLabel="#{conta.nome}" itemValue="#{conta}" />
							</p:selectOneMenu>

							<p:calendar size="11" pattern="dd/MM/yyyy" locale="pt_BR"
								value="#{contaAReceberBean.recebimento.dataPago}" id="dtBaixa"
								onfocus="mascaraDtCalendar('dtBaixa')" styleClass="cssCalender"
								required="true" requiredMessage="Informe uma data da baixa">
							</p:calendar>

						</h:panelGrid>

						<h:panelGrid columns="2" id="panelGridPagamento2">

							<p:inputText size="65" placeholder="descrição"
								id="txtBaixaMultiplaDesc" required="true"
								requiredMessage="Informe a descrição"
								value="#{contaAReceberBean.descricao}"
								disabled="#{contaAReceberBean.recebimento.formaBaixa eq 'BI'}" />

							<h:panelGroup>
								<p:inputText id="txtBaixaPago" size="11" required="true"
									requiredMessage="Informe o valor."
									validatorMessage="O valor de recebimento é menor do que o 
									mínimo permitido de '0,01'"
									disabled="#{contaAReceberrBean.recebimento.formaBaixa eq 'BI'}"
									value="#{contaAReceberBean.recebimento.valorPago}"
									onfocus="formatoMoeda('txtBaixaPago');">
									<f:validateDoubleRange minimum="0.01" />
									<f:convertNumber type="currency" currencySymbol="R$" />
								</p:inputText>

								<p:commandButton title="Add Conta" style="margin-left:2px;"
									process="@this panelGridPagamento panelGridPagamento2"
									action="#{contaAReceberBean.addRecebimento}"
									update="panelGridPagamento panelGridPagamento2 dataTableRecebimento 
									labelVlrApagarBaixaMultipla"
									icon="fa fa-download" styleClass="semPreenchimento">
								</p:commandButton>
							</h:panelGroup>

						</h:panelGrid>

						<p:dataTable id="dataTableRecebimento"
							style="width:auto; margin-top:10px;" rowIndexVar="idx"
							scrollable="true" scrollHeight="160"
							emptyMessage="Nenhum recebimento lançando."
							value="#{contaAReceberBean.listaDeRecebimentos}" var="listPago">

							<p:column style="width:25px; text-align:center;"
								headerText="Ação">
								<p:commandButton title="Excluir" process="@this"
									update="dataTableRecebimento labelVlrApagarBaixaMultipla txtBaixaPago"
									action="#{contaAReceberBean.excluirRecebimentoAbaixar()}"
									icon="ui-icon-trash" styleClass="semPreenchimento">
									<f:setPropertyActionListener value="#{listPago}"
										target="#{contaAReceberBean.recebimento}" />
								</p:commandButton>
							</p:column>

							<p:column style="width:100px;" headerText="Conta à debitar">
								<h:outputText value="#{fn:substring(listPago.conta.nome,0,12)}" />
							</p:column>

							<p:column style="width:300px;" headerText="Descrição">
								<h:outputText value="#{fn:substring(listPago.descricao,0,42)}" />
							</p:column>

							<p:column style="text-align:right; width:100px;"
								headerText="Valor">
								<h:outputText value="#{listPago.valorPago}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>

						</p:dataTable>

						<p:toolbar style="margin-top:10px;" styleClass="semPreenchimento">
							<p:toolbarGroup>
								<p:outputLabel value="Valor à pagar:" styleClass="corLabel"
									style="margin-left:20px; margin-right:10px;" />
								<p:outputLabel value="#{contaAReceberBean.saldo}"
									id="labelVlrApagarBaixaMultipla" styleClass="red">
									<f:convertNumber type="currency" />
								</p:outputLabel>
							</p:toolbarGroup>
							<p:toolbarGroup align="right">
								<p:commandButton value="Confirmar" process="@this dtBaixa"
									oncomplete="if(!args.validationFailed) PF('baixaTitulo').hide()"
									action="#{contaAReceberBean.salvarBaixaMultiplas}"
									icon="ui-icon-check">
								</p:commandButton>
							</p:toolbarGroup>
						</p:toolbar>

					</p:tab>

				</p:tabView>

			</h:form>

		</p:dialog>


		<!-- Titulos recebidos -->
		<p:dialog header="Titulo(s) Recebido(s)" widgetVar="dialogPago"
			modal="true" width="780" height="430" resizable="false"
			draggable="true" id="dgPago" visible="false" closeOnEscape="true"
			appendTo="@(body)">

			<p:ajax event="close" update="frm-tabela toolbar-botoes"
				listener="#{contaAReceberBean.pesquisar()}" />

			<h:form prependId="false" id="frm-titulo-pagos">

				<h:panelGrid columns="6">

					<p:outputLabel value="Cliente"
						style="margin-left:10px; margin-right:10px; color:black" />

					<p:selectOneMenu autoWidth="false" filter="true" disabled="true"
						value="#{contaAReceberBean.filtroRecebimento.cliente}"
						filterMatchMode="contains" style="width:250px;"
						converter="omnifaces.SelectItemsConverter">
						<f:selectItem itemLabel="Selecione..." itemValue="#{null}" />
						<f:selectItems value="#{contaAReceberBean.carregarClientes}"
							var="p" itemLabel="#{p.nome}" itemValue="#{p}" />
					</p:selectOneMenu>

					<p:calendar size="8" pattern="dd/MM/yyyy" locale="pt_BR"
						style="margin-left:5px;" id="dtInicio"
						onfocus="mascaraDtCalendar('dtInicio')" styleClass="cssCalender"
						value="#{contaAReceberBean.filtroRecebimento.dtIni}">
						<p:ajax event="dateSelect" process="@this"
							listener="#{contaAReceberBean.dataLimite()}" update="dtFim" />
					</p:calendar>
					<p:outputLabel value="ATÉ"
						style="margin-left:5px; margin-right:5px; color:black" />
					<p:calendar size="8" pattern="dd/MM/yyyy" locale="pt_BR" id="dtFim"
						mindate="#{contaAReceberBean.filtroRecebimento.dataLimite}"
						onfocus="mascaraDtCalendar('dtFim')" styleClass="cssCalender"
						value="#{contaAReceberBean.filtroRecebimento.dtFim}">
						<p:ajax event="dateSelect" process="@this" />
					</p:calendar>
					<p:commandButton icon="fa fa-search" value="PESQUISA"
						style="margin-left:10px;" update="tbl-pago"
						actionListener="#{contaAReceberBean.pesquisarRecebimento()}" />
				</h:panelGrid>


				<p:dataTable id="tbl-pago" value="#{contaAReceberBean.modelRec}"
					var="pago"
					style="width:auto; margin-top: 10px; margin-bottom:10px;" rows="13"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink}  
				{NextPageLink} {LastPageLink} {CurrentPageReport} {JumpToPageDropdown}"
					emptyMessage="Nenhuma registro encontrado." scrollable="true"
					scrollHeight="345" lazy="true" rowKey="#{pago.id}">

					<p:column headerText="Ação" style="text-align: cente; width:10px;"
						exportable="false">
						<p:commandButton icon="ui-icon-cancel" title="Cancelar pagamento"
							process="@this" update="confirmacaoCancelamentoDialog"
							oncomplete="PF('confirmacaoCancelamento').show()"
							styleClass="semPreenchimento">
							<f:setPropertyActionListener
								target="#{contaAReceberBean.recebimentoSelecionado}"
								value="#{pago}" />
						</p:commandButton>
					</p:column>

					<p:column sortBy="" headerText="Código"
						style="text-align: center; width:35px;">
						<h:outputText value="#{pago.id}" />
					</p:column>

					<p:column sortBy="" headerText="Descrição" width="180">
						<h:outputText value="#{pago.descricao}" />
					</p:column>

					<p:column style="text-align: center; width:50px;"
						headerText="Pago em">
						<h:outputText value="#{pago.dataPago}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>

					<p:column style="text-align: right;width:60px;" headerText="Valor">
						<h:outputText value="#{pago.valorPago}">
							<f:convertNumber type="currency" currencySymbol="R$" />
						</h:outputText>
					</p:column>

				</p:dataTable>

				<p:confirmDialog header="Confirmação de Cancelamento"
					widgetVar="confirmacaoCancelamento" appendTo="@(body)"
					id="confirmacaoCancelamentoDialog">
					<f:facet name="message">
						<h:outputText value="Tem certeza que deseja cancelar o registro:" />
						<br />
						<br />
						<p:repeat value="#{contaAReceberBean.recebimentoSelecionado}"
							var="pg">
							<h:panelGrid columns="3" cellpadding="1">
								<h:outputText value="#{pg.id}"
									style="font-weight: bold; margin-right:10px;" />
								<h:outputText value="#{fn:substring(pg.descricao,0,36)}"
									style="font-weight: bold; margin-right:10px;" />
								<h:outputText value="#{pg.valorPago}" style="font-weight: bold;">
									<f:convertNumber type="currency" />
								</h:outputText>
							</h:panelGrid>
						</p:repeat>
					</f:facet>
					<p:button value="Não"
						onclick="PF('confirmacaoCancelamento').hide(); return false;" />
					<p:commandButton value="Sim"
						actionListener="#{contaAReceberBean.cancelarRecebimentos()}"
						update="tbl-pago" process="@this"
						oncomplete="if(!args.validationFailed) PF('confirmacaoCancelamento').hide()" />
				</p:confirmDialog>

			</h:form>

		</p:dialog>



	</ui:define>

</ui:composition>

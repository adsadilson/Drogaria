<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<style>
<!--
.rotulo {
	width: 190xp !important;
}
-->
</style>

	<p:panel styleClass="semPreenchimento" id="panel-rateio">

		<h:form prependId="false" id="frm-rateio">


			<p:toolbar styleClass="semPreenchimento">
				<p:toolbarGroup>
					<p:commandButton id="addRateio" value="Adicionar" style="margin-bottom:10px;"
						icon="ui-icon-plus" oncomplete="PF('dialogCadRateio').show()"
						process="@this" />
				</p:toolbarGroup>
				<p:toolbarGroup align="right">
					<p:outputLabel value="Total R$"
						style="color: black; margin-right:10px;" />
				</p:toolbarGroup>
			</p:toolbar>

			<p:dataTable id="tblRateioDes" style="width:99%;"
				emptyMessage="Nenhuma registro lançado" var="m">

				<p:column style="width:163px" headerText="Conta">
					<h:outputText value="#{m.conta.nome}" />
				</p:column>

				<p:column style="width:220px" headerText="Descrição">
					<h:outputText value="#{m.descricao}" />
				</p:column>

				<p:column style="width:88px" headerText="Valor">
					<h:outputText value="#{m.vlrSaida}">
						<f:convertNumber type="currency" />
					</h:outputText>
				</p:column>

				<p:column style="text-align:center">
					<p:commandLink title="Excluir" process="@this"
						styleClass="semPreenchimento">
						<i class="fa  fa-trash"></i>
					</p:commandLink>
				</p:column>

			</p:dataTable>

		</h:form>

	</p:panel>

	<p:dialog header="Lançamento de Rateio" widgetVar="dialogCadRateio"
		modal="true" resizable="false" draggable="true" id="dgCadRateio"
		closeOnEscape="true" width="460" height="245" appendTo="@(body)">

		<h:form id="frm-cadastro-rateio">

			<p:growl autoUpdate="true" />

			<h:panelGrid id="panelCadastroRateio" columns="2"
				style="margin-top:10px;" columnClasses="rotulo">


				<p:outputLabel for="txtTipo" value="Tipo" />
				<p:selectOneMenu id="txtTipo" autoWidth="false" style="width:50%;"
					value="#{contaAPagarBean.contaAPagar.tipoConta}"
					disabled="#{movimentacaoBean.movto.notInclusao}"
					converter="omnifaces.SelectItemsConverter" required="true"
					requiredMessage="Selecione tipo">
					<f:selectItem itemLabel="Selecione..." itemValue="#{null}" />
					<f:selectItems value="#{contaAPagarBean.listaTipoContas}"
						var="tipo" itemLabel="#{tipo.sigla} - #{tipo.descricao}"
						itemValue="#{tipo}" />
					<p:ajax event="change" process="@this"
						listener="#{contaAPagarBean.carregarContasLanctos}"
						update="combConta" />
				</p:selectOneMenu>

				<p:outputLabel for="combConta" value="Conta" />
				<p:selectOneMenu id="combConta" required="true" autoWidth="false"
					filter="true" filterMatchMode="contains" style="width:91%;"
					converter="omnifaces.SelectItemsConverter"
					value="#{movimentacaoBean.movto.planoConta}"
					requiredMessage="Selecione conta">
					<f:selectItem itemLabel="Selecione..." itemValue="#{null}" />
					<f:selectItems value="#{contaAPagarBean.listaContas}" var="conta"
						itemLabel="#{conta.nome}" itemValue="#{conta}" />
				</p:selectOneMenu>

				<p:outputLabel for="txtDescricao" value="Descrição" />
				<p:inputText id="txtDescricao" size="36" />

				<p:outputLabel for="combFavorecido" value="Favorecido" />
				<p:selectOneMenu id="combFavorecido" autoWidth="false" filter="true"
					value="#{contaAPagarBean.contaAPagar.fornecedor}"
					filterMatchMode="contains" style="width:91%;"
					converter="omnifaces.SelectItemsConverter">
					<f:selectItem itemLabel="Selecione..." itemValue="#{null}" />
					<f:selectItems value="#{contaAPagarBean.carregarFornecedores}"
						var="p" itemLabel="#{p.nome}" itemValue="#{p}" />
				</p:selectOneMenu>


				<p:outputLabel value="Documento" />
				<p:inputText size="10" />

				<p:outputLabel for="txtValor" value="Valor" />
				<p:inputNumber decimalSeparator="," thousandSeparator="."
					value="#{contaAPagarBean.contaAPagar.valor}" symbol="R$ " size="10"
					required="true" id="txtValor" requiredMessage="Informe o valor"
					minValue="0.01">
					<f:validateDoubleRange minimum="0.01" />
				</p:inputNumber>

			</h:panelGrid>

			<p:toolbar style="margin-top: 15px" styleClass="semPreenchimento">
				<p:toolbarGroup align="right" style="margin-right: 0px;">
					<p:commandButton value="Salvar" icon="fa fa-save"
						process="@this frm-cadastro-rateio"
						action="#{contaAPagarBean.addConta()}" update="frm-cadastro-rateio"
						id="salvarCommandButtonRateio">
					</p:commandButton>
				</p:toolbarGroup>
			</p:toolbar>

			<p:defaultCommand target="salvarCommandButtonRateio" />

		</h:form>

	</p:dialog>

</ui:composition>
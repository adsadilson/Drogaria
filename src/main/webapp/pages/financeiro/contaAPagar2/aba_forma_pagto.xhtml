<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<style>
<!--
.rotulo {
	width: 190xp !important;
}

.ui-panel.pagto .ui-panel-content {
	border: 0;
	background: 0;
	padding: 0;
}
-->
</style>

	<p:panel styleClass="semPreenchimento pagto" id="panel-pagto">

		<h:form prependId="false" id="frm-pagto">

			<h:panelGrid id="panelGrid-pagto" columns="8">

				<p:selectOneMenu id="txtTipoPagto" autoWidth="false"
					style="width:170px;"
					value="#{contaAPagarBean.cPSelecionado.tipoConta}"
					disabled="#{movimentacaoBean.movto.notInclusao}"
					converter="omnifaces.SelectItemsConverter" required="true"
					requiredMessage="Selecione tipo">
					<f:selectItem itemLabel="Tipo" itemValue="#{null}" />
					<f:selectItems value="#{contaAPagarBean.listaTipoContas}"
						var="tipo" itemLabel="#{tipo.sigla} - #{tipo.descricao}"
						itemValue="#{tipo}" />
					<p:ajax event="change" process="@this"
						listener="#{contaAPagarBean.carregarContasLanctos}"
						update="combConta" />
				</p:selectOneMenu>

				<p:outputLabel value="Parcela(s)" style="margin-left:12px; margin-right:2px;"/>
				<p:spinner size="1" min="1" max="100"
					value="#{contaAPagarBean.numVezes}" />

				<p:outputLabel value="Intervalo" style="margin-left:12px; margin-right:2px;"/>
				<p:spinner size="1" min="1" max="30"
					value="#{contaAPagarBean.periodo}" />

				<p:outputLabel value="Dia(s)" style="margin-left:2px; margin-right:10px;" />

				<p:inputText id="txtVlrSaidaPag" required="true"
					requiredMessage="Informe um valor"
					onfocus="formatoMoeda('txtVlrSaidaPag')"
					value="#{contaAPagarBean.movto.vlrSaida}" placeholder="VALOR"
					size="11">
					<f:validateDoubleRange minimum="0.01" />
					<f:convertNumber type="currency" />
				</p:inputText>
				<p:commandButton icon="fa fa-download" title="Adicionar conta"
					process="@this frm-pagto " action="#{contaAPagarBean.addConta()}"
					update="frm-pagto tblPagto txtTotalPagto"
					id="salvarCommandButtonPagto" />
			</h:panelGrid>


			<p:dataTable id="tblPagto" style="width:99%;"
				emptyMessage="Nenhuma registro lançado" scrollable="true"
				scrollHeight="175"
				value="#{contaAPagarBean.contaAPagar.movimentacoes}" var="m">

				<p:column style="width:35px">
					<p:commandButton title="Excluir" process="@this"
						icon="ui-icon-trash" styleClass="semPreenchimento"
						update="tblPagto txtTotalPagto"
						action="#{contaAPagarBean.removerConta()}">
						<f:setPropertyActionListener value="#{m}"
							target="#{contaAPagarBean.movto}" />
					</p:commandButton>

				</p:column>
				<p:column style="width:140px">
					<h:outputText
						value="#{m.planoConta.id}#{m.planoConta.tipo} - #{m.planoConta.nome}" />
				</p:column>
				<p:column style="width:233px">
					<h:outputText value="#{m.descricao}" />
				</p:column>
				<p:column style="width:115px; text-align:right;">
					<h:outputText value="#{m.vlrSaida}">
						<f:convertNumber type="currency" />
					</h:outputText>
				</p:column>
			</p:dataTable>

			<p:toolbar styleClass="semPreenchimento" style="margin-top:10px;">
				<p:toolbarGroup align="right">
					<p:outputLabel value="Total:"
						style="font-size:13px; margin-right:70px; color:black" />
					<p:outputLabel id="txtTotalPagto"
						style="color:red; font-size:14px; margin-right:10px;">
						<f:convertNumber type="currency" />
					</p:outputLabel>
				</p:toolbarGroup>
			</p:toolbar>

			<p:confirmDialog header="Confirmação de Exclusão"
				widgetVar="confirmacaoExclusaoPagto"
				id="confirmacaoExclusaoDialogPagto">
				<f:facet name="message">
					<h:outputText value="Tem certeza que deseja excluir o registro:" />
					<br />
					<h:outputText value="#{contaAPagarBean.cPSelecionado.descricao} ?" />
				</f:facet>
				<p:button value="Não"
					onclick="PF('confirmacaoExclusaoPagto').hide(); return false;" />
				<p:commandButton value="Sim"
					oncomplete="PF('confirmacaoExclusaoPagto').hide();"
					update="tblPagto" action="#{contaAPagarBean.removerConta()}"
					process="@this" />
			</p:confirmDialog>

		</h:form>

	</p:panel>

</ui:composition>